<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>BallCollisionSimulator API documentation</title>
<meta name="description" content="Ball Collision Simulator …">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>BallCollisionSimulator</code></h1>
</header>
<section id="section-intro">
<p>Ball Collision Simulator</p>
<p>This module simulates the elastic collision between two balls using the VPython library. It
contains classes to define the physical and visual properties of the balls, perform the
simulation, and visualize the collision in a 2D space. The module also supports running
the simulation without a graphical user interface (GUI).</p>
<h2 id="classes">Classes</h2>
<ul>
<li>PhysicsParameters: Stores the physical parameters of a ball.</li>
<li>BallParameters: Combines physical and visual properties of a ball.</li>
<li>Ball: Represents a ball in the simulation, managing its state and visualization.</li>
<li>CollisionInfo: Data class for storing collision information.</li>
<li>IntersectionInfo: Data class for storing intersection information of ball paths.</li>
<li>BallCollisionSimulator: Manages the entire simulation process, including initialization,
running the simulation, and handling collisions.</li>
</ul>
<h2 id="functions">Functions</h2>
<ul>
<li>main: The main entry point of the program, running the simulation with either predefined
test parameters or user input.</li>
</ul>
<h2 id="usage">Usage</h2>
<p>Run this module as a script to start the simulation. The user can choose to input custom
parameters for the balls and the simulation time or use predefined test parameters with
the <code>--test</code> argument. Additionally, the <code>--no_gui</code> argument can be used to run the simulation
without the GUI.</p>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="BallCollisionSimulator.main"><code class="name flex">
<span>def <span class="ident">main</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Main entry point for the Ball Collision Simulator.</p>
<p>This function parses command-line arguments to determine whether to use predefined
test parameters or prompt the user for input. It initializes the simulator with the
appropriate parameters and runs the simulation. If the <code>--no_gui</code> flag is set, the
simulation runs without a graphical user interface (GUI).</p>
<ul>
<li>
<p>Command-line Arguments:<br>
<code>--test</code>: Run the simulation with predefined test parameters.<br>
<code>--no_gui</code>: Run the simulation without the GUI.
</p>
</li>
<li>
<p>Prompts:
</p>
<ul>
<li>If not using predefined test parameters, the user is prompted to enter:
<ul>
<li>Mass (kg) for Ball 1 and Ball 2
</li>
<li>Initial position (x, y) in meters for Ball 1 and Ball 2
</li>
<li>Initial velocity (vx, vy) in m/s for Ball 1 and Ball 2
</li>
<li>Simulation time in seconds
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>What it does:
</p>
<ul>
<li>Prints simulation details to the console.
</li>
<li>Runs the simulation, optionally displaying it in a VPython GUI window.
</li>
<li>Waits for a key press to exit if the GUI is enabled.</li>
</ul>
</li>
</ul></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="BallCollisionSimulator.Ball"><code class="flex name class">
<span>class <span class="ident">Ball</span></span>
<span>(</span><span>params: <a title="BallCollisionSimulator.BallParameters" href="#BallCollisionSimulator.BallParameters">BallParameters</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Class representing a ball in the simulation.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>params</code></strong> :&ensp;<code><a title="BallCollisionSimulator.BallParameters" href="#BallCollisionSimulator.BallParameters">BallParameters</a></code></dt>
<dd>Parameters for the ball.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Ball:
    &#34;&#34;&#34;
    Class representing a ball in the simulation.
    &#34;&#34;&#34;

    # Flag to indicate whether the GUI should be disabled (True = no GUI)
    __no_gui = False

    def __init__(self, params: BallParameters):
        &#34;&#34;&#34;
        Args:
            params (BallParameters): Parameters for the ball.
        &#34;&#34;&#34;
        self.mass: float = params.mass
        self.position: vp.vector = params.position
        self.velocity: vp.vector = params.velocity

        # Radius proportional to the mass (0.5m for 1 kg)
        self.radius: float = 0.5 * (self.mass ** (1/3))

        self.name: str = params.name

        if Ball.__no_gui is False:
            self.sphere: vp.sphere = vp.sphere(pos=self.position,
                                               radius=self.radius,
                                               color=params.color,
                                               make_trail=True)
            self.label: vp.label = vp.label(pos=self.position,
                                            text=params.name,
                                            height=14,
                                            color=vp.color.white,
                                            box=False,
                                            opacity=0)

    @classmethod
    def disable_gui(cls, no_gui):
        &#34;&#34;&#34;
        Enables or disables the GUI.

        Args:
            no_gui (bool): Flag to indicate where GUI should be disabled (True = disable GUI).
        &#34;&#34;&#34;
        cls.__no_gui = no_gui

    @property
    def angle(self) -&gt; float:
        &#34;&#34;&#34;Calculate and return the angle of the ball&#39;s velocity vector.&#34;&#34;&#34;
        return vp.degrees(vp.atan2(self.velocity.y, self.velocity.x))

    @property
    def speed(self) -&gt; float:
        &#34;&#34;&#34;Calculate and return the speed of the ball.&#34;&#34;&#34;
        return vp.mag(self.velocity)

    @property
    def momentum(self) -&gt; vp.vector:
        &#34;&#34;&#34;Calculate and return the momentum vector of the ball.&#34;&#34;&#34;
        return self.velocity * self.mass

    @property
    def momentum_mag(self) -&gt; float:
        &#34;&#34;&#34;Calculate and return the magnitude of the ball&#39;s momentum.&#34;&#34;&#34;
        return vp.mag(self.momentum)

    def update_position(self, dt: float) -&gt; None:
        &#34;&#34;&#34;
        Update the position of the ball based on its velocity and time step.

        Args:
            dt (float): Time step for the update.
        &#34;&#34;&#34;
        self.position += self.velocity * dt

        if Ball.__no_gui is False:
            self.sphere.pos = self.position
            self.label.pos = self.position</code></pre>
</details>
<h3>Static methods</h3>
<dl>
<dt id="BallCollisionSimulator.Ball.disable_gui"><code class="name flex">
<span>def <span class="ident">disable_gui</span></span>(<span>no_gui)</span>
</code></dt>
<dd>
<div class="desc"><p>Enables or disables the GUI.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>no_gui</code></strong> :&ensp;<code>bool</code></dt>
<dd>Flag to indicate where GUI should be disabled (True = disable GUI).</dd>
</dl></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="BallCollisionSimulator.Ball.angle"><code class="name">prop <span class="ident">angle</span> : float</code></dt>
<dd>
<div class="desc"><p>Calculate and return the angle of the ball's velocity vector.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def angle(self) -&gt; float:
    &#34;&#34;&#34;Calculate and return the angle of the ball&#39;s velocity vector.&#34;&#34;&#34;
    return vp.degrees(vp.atan2(self.velocity.y, self.velocity.x))</code></pre>
</details>
</dd>
<dt id="BallCollisionSimulator.Ball.momentum"><code class="name">prop <span class="ident">momentum</span> : vp.vector</code></dt>
<dd>
<div class="desc"><p>Calculate and return the momentum vector of the ball.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def momentum(self) -&gt; vp.vector:
    &#34;&#34;&#34;Calculate and return the momentum vector of the ball.&#34;&#34;&#34;
    return self.velocity * self.mass</code></pre>
</details>
</dd>
<dt id="BallCollisionSimulator.Ball.momentum_mag"><code class="name">prop <span class="ident">momentum_mag</span> : float</code></dt>
<dd>
<div class="desc"><p>Calculate and return the magnitude of the ball's momentum.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def momentum_mag(self) -&gt; float:
    &#34;&#34;&#34;Calculate and return the magnitude of the ball&#39;s momentum.&#34;&#34;&#34;
    return vp.mag(self.momentum)</code></pre>
</details>
</dd>
<dt id="BallCollisionSimulator.Ball.speed"><code class="name">prop <span class="ident">speed</span> : float</code></dt>
<dd>
<div class="desc"><p>Calculate and return the speed of the ball.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def speed(self) -&gt; float:
    &#34;&#34;&#34;Calculate and return the speed of the ball.&#34;&#34;&#34;
    return vp.mag(self.velocity)</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="BallCollisionSimulator.Ball.update_position"><code class="name flex">
<span>def <span class="ident">update_position</span></span>(<span>self, dt: float) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Update the position of the ball based on its velocity and time step.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>dt</code></strong> :&ensp;<code>float</code></dt>
<dd>Time step for the update.</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="BallCollisionSimulator.BallCollisionSimulator"><code class="flex name class">
<span>class <span class="ident">BallCollisionSimulator</span></span>
<span>(</span><span>ball1_params: <a title="BallCollisionSimulator.BallParameters" href="#BallCollisionSimulator.BallParameters">BallParameters</a>, ball2_params: <a title="BallCollisionSimulator.BallParameters" href="#BallCollisionSimulator.BallParameters">BallParameters</a>, simulation_time: float)</span>
</code></dt>
<dd>
<div class="desc"><p>Class to simulate the collision between two balls.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>ball1_params</code></strong> :&ensp;<code><a title="BallCollisionSimulator.BallParameters" href="#BallCollisionSimulator.BallParameters">BallParameters</a></code></dt>
<dd>Parameters for the first ball.</dd>
<dt><strong><code>ball2_params</code></strong> :&ensp;<code><a title="BallCollisionSimulator.BallParameters" href="#BallCollisionSimulator.BallParameters">BallParameters</a></code></dt>
<dd>Parameters for the second ball.</dd>
<dt><strong><code>simulation_time</code></strong> :&ensp;<code>float</code></dt>
<dd>Total time to simulate.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class BallCollisionSimulator:
    &#34;&#34;&#34;
    Class to simulate the collision between two balls.
    &#34;&#34;&#34;

    # Flag to indicate whether the GUI should be disabled (True = no GUI)
    __no_gui = False

    def __init__(self, ball1_params: BallParameters,
                 ball2_params: BallParameters,
                 simulation_time: float):
        &#34;&#34;&#34;
        Args:
            ball1_params (BallParameters): Parameters for the first ball.
            ball2_params (BallParameters): Parameters for the second ball.
            simulation_time (float): Total time to simulate.
        &#34;&#34;&#34;
        self.ball1_params: BallParameters = ball1_params
        self.ball2_params: BallParameters = ball2_params
        self.simulation_time: float = simulation_time

        self.scene: Optional[vp.canvas] = None
        self.ball1: Optional[Ball] = None
        self.ball2: Optional[Ball] = None
        self.ball1_state_t0: Optional[Ball] = None
        self.ball2_state_t0: Optional[Ball] = None
        self.initial_distance: Optional[float] = None
        self.total_momentum: Optional[vp.vector] = None
        self.dot_product: Optional[float] = None
        self.relative_speed: Optional[float] = None
        self.collision_info: Optional[CollisionInfo] = None
        self.intersection_info: Optional[IntersectionInfo] = None

    def __del__(self):
        &#34;&#34;&#34;
        Deletes the scene and sets the reference to None to allow scene to disappear from GUI
        &#34;&#34;&#34;
        self.scene.delete()
        self.scene = None

    @classmethod
    def disable_gui(cls, no_gui):
        &#34;&#34;&#34;
        Enables or disables the GUI.

        Args:
            no_gui (bool): Flag to indicate where GUI should be disabled (True = disable GUI).
        &#34;&#34;&#34;
        cls.__no_gui = no_gui
        Ball.disable_gui(no_gui)

    @classmethod
    def create_simulator(cls,
                         phys1_params: PhysicsParameters,
                         phys2_params: PhysicsParameters,
                         simulation_time: float) -&gt; BallCollisionSimulator:
        &#34;&#34;&#34;
        Create a BallCollisionSimulator instance with given parameters.

        Args:
            phys1_params (PhysicsParameters): Physics parameters for the first ball.
            phys2_params (PhysicsParameters): Physics parameters for the second ball.
            simulation_time (float): Total time to simulate.

        Returns:
            BallCollisionSimulator: An instance of the simulator.
        &#34;&#34;&#34;
        ball1_params: BallParameters = BallParameters(phys1_params, color=vp.color.blue, name=&#39;1&#39;)
        ball2_params: BallParameters = BallParameters(phys2_params, color=vp.color.red, name=&#39;2&#39;)

        return cls(ball1_params, ball2_params, simulation_time)

    @staticmethod
    def quit_simulation() -&gt; None:
        &#34;&#34;&#34;Stop the VPython server.&#34;&#34;&#34;
        if BallCollisionSimulator.__no_gui is False:
            # We don&#39;t import vp_services until needed, because importing it will start
            # the server, if not started already.
            import vpython.no_notebook as vp_services
            vp_services.stop_server()

    def __init_simulation(self) -&gt; None:
        &#34;&#34;&#34;Initialize the simulation by setting up the scene and balls.&#34;&#34;&#34;
        if BallCollisionSimulator.__no_gui is False:
            self.scene = vp.canvas(title=&#39;Elastic Collision Simulation&#39;,
                                width=800,
                                height=800,
                                center=vp.vector(0, 0, 0),
                                background=vp.color.black)

            # Set up grid
            self.__create_grid_and_axes()

        # Create ball objects
        self.ball1 = Ball(self.ball1_params)
        self.ball2 = Ball(self.ball2_params)

        # Store intial state for later
        self.ball1_state_t0 = copy(self.ball1)
        self.ball2_state_t0 = copy(self.ball2)

        # Calculate initial momentum
        self.total_momentum = self.ball1.momentum + self.ball2.momentum

        # Calculate initial distance
        self.initial_distance = vp.mag(
            self.ball1.position - self.ball2.position)

        # Calculate the relative speed of the balls to each other
        self.dot_product = vp.dot(self.ball1.velocity - self.ball2.velocity,
                                  self.ball1.position - self.ball2.position)
        self.relative_speed = (self.ball1.velocity - self.ball2.velocity).mag

    def __create_grid_and_axes(self) -&gt; None:
        &#34;&#34;&#34;Create a grid and axes for the simulation scene.&#34;&#34;&#34;
        GRID_RANGE: int = 10
        step: int = 1

        for x in vp.arange(-GRID_RANGE, GRID_RANGE + step, step):
            vp.curve(pos=[vp.vector(x, -GRID_RANGE, 0),
                          vp.vector(x, GRID_RANGE, 0)],
                     color=vp.color.gray(0.5) if x != 0 else vp.color.yellow)
        for y in vp.arange(-GRID_RANGE, GRID_RANGE + step, step):
            vp.curve(pos=[vp.vector(-GRID_RANGE, y, 0),
                          vp.vector(GRID_RANGE, y, 0)],
                     color=vp.color.gray(0.5) if y != 0 else vp.color.yellow)

        # Create axis labels
        vp.label(pos=vp.vector(GRID_RANGE + 0.5, 0, 0),
                 text=&#39;X&#39;, height=16, box=False)
        vp.label(pos=vp.vector(0, GRID_RANGE + 0.5, 0),
                 text=&#39;Y&#39;, height=16, box=False)

    @staticmethod
    def __print_velocity_details(ball1: Ball, ball2: Ball) -&gt; None:
        &#34;&#34;&#34;
        Print detailed information about the velocities of two balls.

        Args:
            ball1 (Ball): First ball object.
            ball2 (Ball): Second ball object.
        &#34;&#34;&#34;
        print()
        for ball in ball1, ball2:
            print(f&#39;Ball {ball.name}:&#39;)
            print(f&#39;  Mass: {ball.mass} kg&#39;)
            print(f&#39;  Radius: {ball.radius:.2f} m&#39;)
            print(f&#39;  Position: ({ball.position.x:.2f}, {
                  ball.position.y:.2f})&#39;)
            print(f&#39;  Velocity: ({ball.velocity.x:.2f}, {ball.velocity.y:.2f}), or {
                ball.speed:.2f} m/s at {ball.angle:.2f} degrees&#39;)
            print(f&#39;  Momentum: ({ball.momentum.x:.2f}, {ball.momentum.y:.2f}), or {
                ball.momentum_mag:.2f} N-s at {ball.angle:.2f} degrees&#39;)
        print()

    def __calculate_intersection(self) -&gt; None:
        &#34;&#34;&#34;Calculate the intersection point of the paths of the two balls.&#34;&#34;&#34;
        assert self.ball1_state_t0
        assert self.ball2_state_t0

        # Extract initial positions and velocities
        x1, y1 = self.ball1_state_t0.position.x, self.ball1_state_t0.position.y
        x2, y2 = self.ball2_state_t0.position.x, self.ball2_state_t0.position.y
        vx1, vy1 = self.ball1_state_t0.velocity.x, self.ball1_state_t0.velocity.y
        vx2, vy2 = self.ball2_state_t0.velocity.x, self.ball2_state_t0.velocity.y

        # Calculate end points of the line segments
        x1_end = x1 + vx1 * self.simulation_time
        y1_end = y1 + vy1 * self.simulation_time
        x2_end = x2 + vx2 * self.simulation_time
        y2_end = y2 + vy2 * self.simulation_time

        # Calculate the intersection of these line segments
        denominator = (x1 - x1_end) * (y2 - y2_end) - \
            (y1 - y1_end) * (x2 - x2_end)

        if denominator == 0:
            return None  # Lines are parallel

        t = ((x1 - x2) * (y2 - y2_end) - (y1 - y2)
             * (x2 - x2_end)) / denominator
        u = -((x1 - x1_end) * (y1 - y2) -
              (y1 - y1_end) * (x1 - x2)) / denominator

        # Correct -0.0 to 0.0
        if t == -0.0:
            t = 0.0
        if u == -0.0:
            u = 0.0

        if 0 &lt;= t &lt;= 1 and 0 &lt;= u &lt;= 1:
            # Intersection point
            ix = x1 + t * (x1_end - x1)
            iy = y1 + t * (y1_end - y1)

            # Store intersection info
            self.intersection_info = IntersectionInfo(position=vp.vector(ix, iy, 0),
                                                      ball1_time=t * self.simulation_time,
                                                      ball2_time=u * self.simulation_time)

    def __process_post_collision_physics(self) -&gt; None:
        &#34;&#34;&#34;Calculate and update the velocities of the balls after collision.&#34;&#34;&#34;
        assert self.ball1
        assert self.ball2

        m1: float = self.ball1.mass
        m2: float = self.ball2.mass
        v1_initial: vp.vector = self.ball1.velocity
        v2_initial: vp.vector = self.ball2.velocity
        self.ball1.velocity = (v1_initial * (m1 - m2) +
                               2 * m2 * v2_initial) / (m1 + m2)
        self.ball2.velocity = (v2_initial * (m2 - m1) +
                               2 * m1 * v1_initial) / (m1 + m2)

    def __verify_conservation_of_momentum(self) -&gt; None:
        &#34;&#34;&#34;Verify that momentum is conserved after the collision.&#34;&#34;&#34;
        assert self.ball1
        assert self.ball2
        assert self.total_momentum

        # Calculate final total momentum
        final_total_momentum: vp.vector = self.ball1.momentum + self.ball2.momentum

        # Verify momentum has been conserved
        assert round(self.total_momentum.mag, ndigits=3) == \
            round(final_total_momentum.mag, ndigits=3), \
            f&#39;Initial total: {self.total_momentum.mag}, Final total: {final_total_momentum.mag}&#39;

    def __run_simulation(self) -&gt; None:
        &#34;&#34;&#34;Run the simulation loop.&#34;&#34;&#34;
        assert self.ball1
        assert self.ball2

        dt: float = 0.01
        time_elapsed: float = 0.0

        SIMULATION_TIME_AFTER_COLLISION: int = 2  # secs

        while True:
            vp.rate(100)

            # If a collision hasn&#39;t occured already and the ball&#39;s positions are within the
            # distance of both radiuses, we have a collision
            if not self.collision_info and \
                    vp.mag(self.ball1.position - self.ball2.position) &lt;= \
            (self.ball1.radius + self.ball2.radius):
                # update balls based on physics of collision
                self.__process_post_collision_physics()

                # Store collision state info for later
                self.collision_info = CollisionInfo(ball1=copy(self.ball1),
                                                    ball2=copy(self.ball2),
                                                    time=time_elapsed)

            # If we&#39;ve had a collision, check if we&#39;ve reached the &#34;run a bit after the collision&#34;
            # time. If we haven&#39;t had a collision, check if simulation duration has past
            if ((self.collision_info is not None) and
                time_elapsed &gt; (self.collision_info.time + SIMULATION_TIME_AFTER_COLLISION)) or \
                    (time_elapsed &gt; self.simulation_time):
                break

            self.ball1.update_position(dt)
            self.ball2.update_position(dt)
            time_elapsed += dt

    def run(self) -&gt; None:
        &#34;&#34;&#34;
        Run the simulation.
        &#34;&#34;&#34;
        self.__init_simulation()

        assert self.ball1
        assert self.ball2
        assert self.ball1_state_t0
        assert self.ball2_state_t0
        assert self.dot_product is not None
        assert self.total_momentum

        print(&#39;\n***************************************************&#39;)
        print(&#39;Initial Conditions:&#39;)
        self.__print_velocity_details(self.ball1_state_t0, self.ball2_state_t0)
        print(f&#39;Initial Distance from each other: {self.initial_distance:.2f} m&#39;)
        print(f&#39;Sum of radii for both balls: {(self.ball1.radius + self.ball2.radius):.2f}&#39;)
        if self.dot_product &lt; 0.0:
            print(f&#39;Relative Speed toward each other: {self.relative_speed:.2f} m/s&#39;)
        else:
            print(f&#39;Relative Speed away from each other: {self.relative_speed:.2f} m/s&#39;)
        print(f&#39;Total Momentum: ({self.total_momentum.x:.2f}, {
            self.total_momentum.y:.2f}), or {vp.mag(self.total_momentum):.2f} m/s at {
            vp.degrees(vp.atan2(self.total_momentum.y, self.total_momentum.x)):.2f} degrees&#39;)
        print()

        # Run the simulation
        self.__run_simulation()

        # If collision occured
        if self.collision_info is not None:
            print(f&#39;Collision occured at time: {self.collision_info.time:.2f} secs&#39;)
            print(&#39;\nPost Collision Conditions:&#39;)
            self.__print_velocity_details(
                self.collision_info.ball1, self.collision_info.ball2)
        # Else no collision, see if the paths intersected
        else:
            print(f&#39;No collision occured during simulation time of {
                self.simulation_time} secs.&#39;)

            # Calculate path intersection (if any)
            self.__calculate_intersection()
            if self.intersection_info:
                print(&#39;Paths did intersect though:&#39;)
                print(f&#39;  Path Intersection Point: ({self.intersection_info.position.x:.2f}, {
                    self.intersection_info.position.y:.2f})&#39;)
                print(f&#39;  Time for Ball 1 to reach intersection: {
                    self.intersection_info.ball1_time:.2f} secs&#39;)
                print(f&#39;  Time for Ball 2 to reach intersection: {
                    self.intersection_info.ball2_time:.2f} secs&#39;)
            else:
                print(&#39;No path intersection found either.&#39;)

        print(&#39;###################################################&#39;)

        self.__verify_conservation_of_momentum()</code></pre>
</details>
<h3>Static methods</h3>
<dl>
<dt id="BallCollisionSimulator.BallCollisionSimulator.create_simulator"><code class="name flex">
<span>def <span class="ident">create_simulator</span></span>(<span>phys1_params: <a title="BallCollisionSimulator.PhysicsParameters" href="#BallCollisionSimulator.PhysicsParameters">PhysicsParameters</a>, phys2_params: <a title="BallCollisionSimulator.PhysicsParameters" href="#BallCollisionSimulator.PhysicsParameters">PhysicsParameters</a>, simulation_time: float) ‑> <a title="BallCollisionSimulator.BallCollisionSimulator" href="#BallCollisionSimulator.BallCollisionSimulator">BallCollisionSimulator</a></span>
</code></dt>
<dd>
<div class="desc"><p>Create a BallCollisionSimulator instance with given parameters.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>phys1_params</code></strong> :&ensp;<code><a title="BallCollisionSimulator.PhysicsParameters" href="#BallCollisionSimulator.PhysicsParameters">PhysicsParameters</a></code></dt>
<dd>Physics parameters for the first ball.</dd>
<dt><strong><code>phys2_params</code></strong> :&ensp;<code><a title="BallCollisionSimulator.PhysicsParameters" href="#BallCollisionSimulator.PhysicsParameters">PhysicsParameters</a></code></dt>
<dd>Physics parameters for the second ball.</dd>
<dt><strong><code>simulation_time</code></strong> :&ensp;<code>float</code></dt>
<dd>Total time to simulate.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="BallCollisionSimulator.BallCollisionSimulator" href="#BallCollisionSimulator.BallCollisionSimulator">BallCollisionSimulator</a></code></dt>
<dd>An instance of the simulator.</dd>
</dl></div>
</dd>
<dt id="BallCollisionSimulator.BallCollisionSimulator.disable_gui"><code class="name flex">
<span>def <span class="ident">disable_gui</span></span>(<span>no_gui)</span>
</code></dt>
<dd>
<div class="desc"><p>Enables or disables the GUI.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>no_gui</code></strong> :&ensp;<code>bool</code></dt>
<dd>Flag to indicate where GUI should be disabled (True = disable GUI).</dd>
</dl></div>
</dd>
<dt id="BallCollisionSimulator.BallCollisionSimulator.quit_simulation"><code class="name flex">
<span>def <span class="ident">quit_simulation</span></span>(<span>) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Stop the VPython server.</p></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="BallCollisionSimulator.BallCollisionSimulator.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>self) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Run the simulation.</p></div>
</dd>
</dl>
</dd>
<dt id="BallCollisionSimulator.BallParameters"><code class="flex name class">
<span>class <span class="ident">BallParameters</span></span>
<span>(</span><span>physics: <a title="BallCollisionSimulator.PhysicsParameters" href="#BallCollisionSimulator.PhysicsParameters">PhysicsParameters</a>, color: vp.color = vp.color.red, name: str = '')</span>
</code></dt>
<dd>
<div class="desc"><p>Class to store all parameters of a ball, including physics and visual properties.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>physics</code></strong> :&ensp;<code><a title="BallCollisionSimulator.PhysicsParameters" href="#BallCollisionSimulator.PhysicsParameters">PhysicsParameters</a></code></dt>
<dd>Physical parameters of the ball.</dd>
<dt><strong><code>color</code></strong> :&ensp;<code>vp.color</code>, optional</dt>
<dd>Color of the ball. Defaults to red.</dd>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Name or identifier for the ball. Defaults to ''.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class BallParameters:
    &#34;&#34;&#34;
    Class to store all parameters of a ball, including physics and visual properties.
    &#34;&#34;&#34;

    def __init__(self, physics: PhysicsParameters, color: vp.color = vp.color.red, name: str = &#39;&#39;):
        &#34;&#34;&#34;
        Args:
            physics (PhysicsParameters): Physical parameters of the ball.
            color (vp.color, optional): Color of the ball. Defaults to red.
            name (str, optional): Name or identifier for the ball. Defaults to &#39;&#39;.
        &#34;&#34;&#34;
        self.mass: float = physics.mass
        self.position: vp.vector = physics.position
        self.velocity: vp.vector = physics.velocity
        self.color: vp.color = color
        self.name: str = name</code></pre>
</details>
</dd>
<dt id="BallCollisionSimulator.CollisionInfo"><code class="flex name class">
<span>class <span class="ident">CollisionInfo</span></span>
<span>(</span><span>time: float, ball1: <a title="BallCollisionSimulator.Ball" href="#BallCollisionSimulator.Ball">Ball</a>, ball2: <a title="BallCollisionSimulator.Ball" href="#BallCollisionSimulator.Ball">Ball</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Data class to store information about a collision.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class CollisionInfo:
    &#34;&#34;&#34;Data class to store information about a collision.&#34;&#34;&#34;
    time: float
    ball1: Ball
    ball2: Ball</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="BallCollisionSimulator.CollisionInfo.ball1"><code class="name">var <span class="ident">ball1</span> : <a title="BallCollisionSimulator.Ball" href="#BallCollisionSimulator.Ball">Ball</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="BallCollisionSimulator.CollisionInfo.ball2"><code class="name">var <span class="ident">ball2</span> : <a title="BallCollisionSimulator.Ball" href="#BallCollisionSimulator.Ball">Ball</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="BallCollisionSimulator.CollisionInfo.time"><code class="name">var <span class="ident">time</span> : float</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="BallCollisionSimulator.IntersectionInfo"><code class="flex name class">
<span>class <span class="ident">IntersectionInfo</span></span>
<span>(</span><span>position: vp.vector, ball1_time: float, ball2_time: float)</span>
</code></dt>
<dd>
<div class="desc"><p>Data class to store information about an intersection of ball paths.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class IntersectionInfo:
    &#34;&#34;&#34;Data class to store information about an intersection of ball paths.&#34;&#34;&#34;
    position: vp.vector
    ball1_time: float
    ball2_time: float</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="BallCollisionSimulator.IntersectionInfo.ball1_time"><code class="name">var <span class="ident">ball1_time</span> : float</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="BallCollisionSimulator.IntersectionInfo.ball2_time"><code class="name">var <span class="ident">ball2_time</span> : float</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="BallCollisionSimulator.IntersectionInfo.position"><code class="name">var <span class="ident">position</span> : vp.vector</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="BallCollisionSimulator.PhysicsParameters"><code class="flex name class">
<span>class <span class="ident">PhysicsParameters</span></span>
<span>(</span><span>mass: float, position: Tuple[float, float], velocity: Tuple[float, float])</span>
</code></dt>
<dd>
<div class="desc"><p>Class to store the physical parameters of a ball.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>mass</code></strong> :&ensp;<code>float</code></dt>
<dd>Mass of the ball in kg.</dd>
<dt><strong><code>position</code></strong> :&ensp;<code>Tuple[float, float]</code></dt>
<dd>Initial position of the ball (x, y) in meters.</dd>
<dt><strong><code>velocity</code></strong> :&ensp;<code>Tuple[float, float]</code></dt>
<dd>Initial velocity of the ball (vx, vy) in m/s.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class PhysicsParameters:
    &#34;&#34;&#34;
    Class to store the physical parameters of a ball.
    &#34;&#34;&#34;

    def __init__(self, mass: float, position: Tuple[float, float], velocity: Tuple[float, float]):
        &#34;&#34;&#34;
        Args:
            mass (float): Mass of the ball in kg.
            position (Tuple[float, float]): Initial position of the ball (x, y) in meters.
            velocity (Tuple[float, float]): Initial velocity of the ball (vx, vy) in m/s.
        &#34;&#34;&#34;
        self.mass: float = mass
        self.position: vp.vector = vp.vector(*position, 0)
        self.velocity: vp.vector = vp.vector(*velocity, 0)</code></pre>
</details>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="BallCollisionSimulator.main" href="#BallCollisionSimulator.main">main</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="BallCollisionSimulator.Ball" href="#BallCollisionSimulator.Ball">Ball</a></code></h4>
<ul class="two-column">
<li><code><a title="BallCollisionSimulator.Ball.angle" href="#BallCollisionSimulator.Ball.angle">angle</a></code></li>
<li><code><a title="BallCollisionSimulator.Ball.disable_gui" href="#BallCollisionSimulator.Ball.disable_gui">disable_gui</a></code></li>
<li><code><a title="BallCollisionSimulator.Ball.momentum" href="#BallCollisionSimulator.Ball.momentum">momentum</a></code></li>
<li><code><a title="BallCollisionSimulator.Ball.momentum_mag" href="#BallCollisionSimulator.Ball.momentum_mag">momentum_mag</a></code></li>
<li><code><a title="BallCollisionSimulator.Ball.speed" href="#BallCollisionSimulator.Ball.speed">speed</a></code></li>
<li><code><a title="BallCollisionSimulator.Ball.update_position" href="#BallCollisionSimulator.Ball.update_position">update_position</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="BallCollisionSimulator.BallCollisionSimulator" href="#BallCollisionSimulator.BallCollisionSimulator">BallCollisionSimulator</a></code></h4>
<ul class="">
<li><code><a title="BallCollisionSimulator.BallCollisionSimulator.create_simulator" href="#BallCollisionSimulator.BallCollisionSimulator.create_simulator">create_simulator</a></code></li>
<li><code><a title="BallCollisionSimulator.BallCollisionSimulator.disable_gui" href="#BallCollisionSimulator.BallCollisionSimulator.disable_gui">disable_gui</a></code></li>
<li><code><a title="BallCollisionSimulator.BallCollisionSimulator.quit_simulation" href="#BallCollisionSimulator.BallCollisionSimulator.quit_simulation">quit_simulation</a></code></li>
<li><code><a title="BallCollisionSimulator.BallCollisionSimulator.run" href="#BallCollisionSimulator.BallCollisionSimulator.run">run</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="BallCollisionSimulator.BallParameters" href="#BallCollisionSimulator.BallParameters">BallParameters</a></code></h4>
</li>
<li>
<h4><code><a title="BallCollisionSimulator.CollisionInfo" href="#BallCollisionSimulator.CollisionInfo">CollisionInfo</a></code></h4>
<ul class="">
<li><code><a title="BallCollisionSimulator.CollisionInfo.ball1" href="#BallCollisionSimulator.CollisionInfo.ball1">ball1</a></code></li>
<li><code><a title="BallCollisionSimulator.CollisionInfo.ball2" href="#BallCollisionSimulator.CollisionInfo.ball2">ball2</a></code></li>
<li><code><a title="BallCollisionSimulator.CollisionInfo.time" href="#BallCollisionSimulator.CollisionInfo.time">time</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="BallCollisionSimulator.IntersectionInfo" href="#BallCollisionSimulator.IntersectionInfo">IntersectionInfo</a></code></h4>
<ul class="">
<li><code><a title="BallCollisionSimulator.IntersectionInfo.ball1_time" href="#BallCollisionSimulator.IntersectionInfo.ball1_time">ball1_time</a></code></li>
<li><code><a title="BallCollisionSimulator.IntersectionInfo.ball2_time" href="#BallCollisionSimulator.IntersectionInfo.ball2_time">ball2_time</a></code></li>
<li><code><a title="BallCollisionSimulator.IntersectionInfo.position" href="#BallCollisionSimulator.IntersectionInfo.position">position</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="BallCollisionSimulator.PhysicsParameters" href="#BallCollisionSimulator.PhysicsParameters">PhysicsParameters</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
